<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
    <link rel="stylesheet" href="styles.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

    <meta charset="UTF-8">
    <meta name="twitter:dnt" content="on">
    <title>Twitter Map</title>
</head>
<body>
    <div id="my-map"></div>
</body>

<script>
    var basemap = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    });

    var map = L.map('my-map').setView([20.0,0.0], 2);

    $.getJSON("temp.geojson", function(data) {
        var geojson = L.geoJson(data, {
          onEachFeature: function (feature, layer) {
            layer.bindPopup("<blockquote class=twitter-tweet data-cards=hidden data-lang=" + feature.properties.lang + "><p lang="
            + feature.properties.lang + "dir=ltr>" + feature.properties.text + "</p>&mdash;" + feature.properties.user_name +
            "<a href=https://twitter.com/" + feature.properties.user_name + "/status/" + feature.properties.id + ">"
            + feature.properties.date + "</a></blockquote>");
          }
        });

        basemap.addTo(map);
        geojson.addTo(map);
    });

    map.on('popupopen', function(e) {
        $.getScript("https://platform.twitter.com/widgets.js");
        var px = map.project(e.popup._latlng);
        px.y -= e.popup._container.clientHeight/2;
        map.panTo(map.unproject(px),{animate: true});
    });
</script>
</html>